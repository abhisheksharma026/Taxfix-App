2025-03-10 10:01:37.087 | INFO     | __main__:main:10 - Starting model service
2025-03-10 10:01:37.092 | INFO     | __main__:main:14 - Prediction: [1]
2025-03-10 10:02:01.636 | INFO     | __main__:main:10 - Starting model service
2025-03-10 10:02:01.641 | INFO     | __main__:main:14 - Prediction: [1]
2025-03-10 10:02:19.591 | INFO     | __main__:main:10 - Starting model service
2025-03-10 10:02:19.591 | INFO     | model_service:load_model:18 - Model catboost_model_v1.pkl not found
2025-03-10 10:02:19.591 | INFO     | collection:load_data:6 - Loading data from data/dataset.csv
2025-03-10 10:02:19.600 | INFO     | model:train_model:30 - Training model
2025-03-10 10:02:20.396 | INFO     | model:evaluate_model:47 - F1 score: 0.7694650301089473
2025-03-10 10:02:20.397 | INFO     | model:save_model:53 - Saving model into directory
2025-03-10 10:02:20.397 | INFO     | model_service:load_model:20 - Model catboost_model_v1.pkl trained and saved
2025-03-10 10:02:20.404 | INFO     | __main__:main:14 - Prediction: [1]
2025-03-10 11:50:50.354 | INFO     | __main__:main:10 - Starting model service
2025-03-10 11:50:50.369 | INFO     | __main__:main:14 - Prediction: [1]
2025-03-10 11:53:17.734 | INFO     | __main__:main:11 - Starting model service
2025-03-10 11:53:17.739 | INFO     | __main__:main:15 - Prediction: [1]
2025-03-10 11:53:17.741 | INFO     | __main__:main:21 - Prediction on test json: [1]
2025-03-10 11:53:43.310 | INFO     | __main__:main:11 - Starting model service
2025-03-10 11:53:43.314 | INFO     | __main__:main:15 - Prediction on test data from config: [1]
2025-03-10 11:53:43.317 | INFO     | __main__:main:21 - Prediction on test json: [1]
2025-03-10 11:54:08.448 | INFO     | __main__:main:11 - Starting model service
2025-03-10 11:54:08.452 | INFO     | __main__:main:15 - Prediction on test data from config: [1]
2025-03-10 11:54:08.454 | INFO     | __main__:main:21 - Prediction on test json: [1]
2025-03-10 15:14:31.490 | INFO     | __main__:main:12 - Starting model service
2025-03-10 15:14:31.495 | ERROR    | __main__:<module>:29 - An error has been caught in function '<module>', process 'MainProcess' (25508), thread 'MainThread' (8323484672):
Traceback (most recent call last):

> File "/Users/anotherbadcode/Downloads/TaxFix-App/runner.py", line 29, in <module>
    main()
    └ <function main at 0x104ca9800>

  File "/Users/anotherbadcode/Downloads/TaxFix-App/runner.py", line 15, in main
    pred = ml_svc.predict(pd.DataFrame(process_features([settings.test_data])))
           │      │       │  │         │                 │        └ {'age': 30, 'income': 45000, 'employment_type': 'full_time', 'marital_status': 'single', 'time_spent_on_platform': 120, 'numb...
           │      │       │  │         │                 └ Settings(model_dir=PosixPath('models'), model_filename='catboost_model_v1.pkl', model_path='models/catboost_model_v1.pkl', da...
           │      │       │  │         └ <function process_features at 0x1191f5120>
           │      │       │  └ <class 'pandas.core.frame.DataFrame'>
           │      │       └ <module 'pandas' from '/Users/anotherbadcode/Library/Caches/pypoetry/virtualenvs/taxfix-app-9B8dhDvo-py3.11/lib/python3.11/si...
           │      └ <function ModelService.predict at 0x13eb1e7a0>
           └ <model_service.ModelService object at 0x13e306150>

  File "/Users/anotherbadcode/Downloads/TaxFix-App/preparation.py", line 11, in process_features
    X['age'] = X['age'].astype(int)
    │          └ [{'age': 30, 'income': 45000, 'employment_type': 'full_time', 'marital_status': 'single', 'time_spent_on_platform': 120, 'num...
    └ [{'age': 30, 'income': 45000, 'employment_type': 'full_time', 'marital_status': 'single', 'time_spent_on_platform': 120, 'num...

TypeError: list indices must be integers or slices, not str
2025-03-10 15:16:52.695 | INFO     | __main__:main:12 - Starting model service
2025-03-10 15:16:52.696 | ERROR    | __main__:<module>:29 - An error has been caught in function '<module>', process 'MainProcess' (25628), thread 'MainThread' (8323484672):
Traceback (most recent call last):

> File "/Users/anotherbadcode/Downloads/TaxFix-App/runner.py", line 29, in <module>
    main()
    └ <function main at 0x1022f91c0>

  File "/Users/anotherbadcode/Downloads/TaxFix-App/runner.py", line 15, in main
    pred = ml_svc.predict(pd.DataFrame(process_features([settings.test_data])))
           │      │       │  │         │                 │        └ {'age': 30, 'income': 45000, 'employment_type': 'full_time', 'marital_status': 'single', 'time_spent_on_platform': 120, 'numb...
           │      │       │  │         │                 └ Settings(model_dir=PosixPath('models'), model_filename='catboost_model_v1.pkl', model_path='models/catboost_model_v1.pkl', da...
           │      │       │  │         └ <function process_features at 0x122921080>
           │      │       │  └ <class 'pandas.core.frame.DataFrame'>
           │      │       └ <module 'pandas' from '/Users/anotherbadcode/Library/Caches/pypoetry/virtualenvs/taxfix-app-9B8dhDvo-py3.11/lib/python3.11/si...
           │      └ <function ModelService.predict at 0x1305e2700>
           └ <model_service.ModelService object at 0x1305c8110>

  File "/Users/anotherbadcode/Downloads/TaxFix-App/preparation.py", line 11, in process_features
    X['age'] = X['age'].astype(int)
    │          └ [{'age': 30, 'income': 45000, 'employment_type': 'full_time', 'marital_status': 'single', 'time_spent_on_platform': 120, 'num...
    └ [{'age': 30, 'income': 45000, 'employment_type': 'full_time', 'marital_status': 'single', 'time_spent_on_platform': 120, 'num...

TypeError: list indices must be integers or slices, not str
2025-03-10 15:17:59.484 | INFO     | __main__:main:12 - Starting model service
2025-03-10 15:17:59.485 | ERROR    | __main__:<module>:29 - An error has been caught in function '<module>', process 'MainProcess' (25669), thread 'MainThread' (8323484672):
Traceback (most recent call last):

> File "/Users/anotherbadcode/Downloads/TaxFix-App/runner.py", line 29, in <module>
    main()
    └ <function main at 0x1024d11c0>

  File "/Users/anotherbadcode/Downloads/TaxFix-App/runner.py", line 15, in main
    pred = ml_svc.predict(pd.DataFrame(process_features([settings.test_data])))
           │      │       │  │         │                 │        └ {'age': 30, 'income': 45000, 'employment_type': 'full_time', 'marital_status': 'single', 'time_spent_on_platform': 120, 'numb...
           │      │       │  │         │                 └ Settings(model_dir=PosixPath('models'), model_filename='catboost_model_v1.pkl', model_path='models/catboost_model_v1.pkl', da...
           │      │       │  │         └ <function process_features at 0x11784d080>
           │      │       │  └ <class 'pandas.core.frame.DataFrame'>
           │      │       └ <module 'pandas' from '/Users/anotherbadcode/Library/Caches/pypoetry/virtualenvs/taxfix-app-9B8dhDvo-py3.11/lib/python3.11/si...
           │      └ <function ModelService.predict at 0x141e8a700>
           └ <model_service.ModelService object at 0x137439e10>

  File "/Users/anotherbadcode/Downloads/TaxFix-App/preparation.py", line 12, in process_features
    X = pd.DataFrame(X)
                     └ [{'age': 30, 'income': 45000, 'employment_type': 'full_time', 'marital_status': 'single', 'time_spent_on_platform': 120, 'num...

NameError: name 'pd' is not defined
2025-03-10 15:18:13.405 | INFO     | __main__:main:12 - Starting model service
2025-03-10 15:18:13.409 | ERROR    | __main__:<module>:29 - An error has been caught in function '<module>', process 'MainProcess' (25684), thread 'MainThread' (8323484672):
Traceback (most recent call last):

  File "/Users/anotherbadcode/Library/Caches/pypoetry/virtualenvs/taxfix-app-9B8dhDvo-py3.11/lib/python3.11/site-packages/pandas/core/indexes/base.py", line 3805, in get_loc
    return self._engine.get_loc(casted_key)
           │    │               └ 'sessions_per_minute'
           │    └ <pandas._libs.properties.CachedProperty object at 0x121802840>
           └ Index(['age', 'income', 'employment_type', 'marital_status',
                    'time_spent_on_platform', 'number_of_sessions',
                    'f...
  File "index.pyx", line 167, in pandas._libs.index.IndexEngine.get_loc
  File "index.pyx", line 196, in pandas._libs.index.IndexEngine.get_loc
  File "pandas/_libs/hashtable_class_helper.pxi", line 7081, in pandas._libs.hashtable.PyObjectHashTable.get_item
  File "pandas/_libs/hashtable_class_helper.pxi", line 7089, in pandas._libs.hashtable.PyObjectHashTable.get_item

KeyError: 'sessions_per_minute'


The above exception was the direct cause of the following exception:


Traceback (most recent call last):

> File "/Users/anotherbadcode/Downloads/TaxFix-App/runner.py", line 29, in <module>
    main()
    └ <function main at 0x1025a11c0>

  File "/Users/anotherbadcode/Downloads/TaxFix-App/runner.py", line 15, in main
    pred = ml_svc.predict(pd.DataFrame(process_features([settings.test_data])))
           │      │       │  │         │                 │        └ {'age': 30, 'income': 45000, 'employment_type': 'full_time', 'marital_status': 'single', 'time_spent_on_platform': 120, 'numb...
           │      │       │  │         │                 └ Settings(model_dir=PosixPath('models'), model_filename='catboost_model_v1.pkl', model_path='models/catboost_model_v1.pkl', da...
           │      │       │  │         └ <function process_features at 0x122af5080>
           │      │       │  └ <class 'pandas.core.frame.DataFrame'>
           │      │       └ <module 'pandas' from '/Users/anotherbadcode/Library/Caches/pypoetry/virtualenvs/taxfix-app-9B8dhDvo-py3.11/lib/python3.11/si...
           │      └ <function ModelService.predict at 0x13291e700>
           └ <model_service.ModelService object at 0x1323dd0d0>

  File "/Users/anotherbadcode/Downloads/TaxFix-App/preparation.py", line 25, in process_features
    X["sessions_per_minute"] = X["sessions_per_minute"].astype(float).astype(int)
    │                          └    age   income employment_type  ... previous_year_filing  device_type  referral_source
    │                            0   30  45000.0       full_time  ... ...
    └    age   income employment_type  ... previous_year_filing  device_type  referral_source
      0   30  45000.0       full_time  ... ...

  File "/Users/anotherbadcode/Library/Caches/pypoetry/virtualenvs/taxfix-app-9B8dhDvo-py3.11/lib/python3.11/site-packages/pandas/core/frame.py", line 4102, in __getitem__
    indexer = self.columns.get_loc(key)
              │    │               └ 'sessions_per_minute'
              │    └ <pandas._libs.properties.AxisProperty object at 0x121bf3790>
              └    age   income employment_type  ... previous_year_filing  device_type  referral_source
                0   30  45000.0       full_time  ... ...
  File "/Users/anotherbadcode/Library/Caches/pypoetry/virtualenvs/taxfix-app-9B8dhDvo-py3.11/lib/python3.11/site-packages/pandas/core/indexes/base.py", line 3812, in get_loc
    raise KeyError(key) from err
                   └ 'sessions_per_minute'

KeyError: 'sessions_per_minute'
2025-03-10 15:19:11.705 | INFO     | __main__:main:12 - Starting model service
2025-03-10 15:19:11.721 | INFO     | __main__:main:16 - Prediction on test data from config: [1]
2025-03-10 15:19:11.721 | ERROR    | __main__:<module>:29 - An error has been caught in function '<module>', process 'MainProcess' (25707), thread 'MainThread' (8323484672):
Traceback (most recent call last):

> File "/Users/anotherbadcode/Downloads/TaxFix-App/runner.py", line 29, in <module>
    main()
    └ <function main at 0x1001cd1c0>

  File "/Users/anotherbadcode/Downloads/TaxFix-App/runner.py", line 21, in main
    test_df = process_features(test_df)
              └ <function process_features at 0x132b21120>

UnboundLocalError: cannot access local variable 'test_df' where it is not associated with a value
2025-03-10 15:19:42.700 | INFO     | __main__:main:12 - Starting model service
2025-03-10 15:19:42.705 | INFO     | __main__:main:16 - Prediction on test data from config: [1]
2025-03-10 15:19:42.714 | INFO     | __main__:main:26 - Prediction on test json: [1]
2025-03-10 15:24:08.860 | INFO     | __main__:main:12 - Starting model service
2025-03-10 15:24:08.875 | INFO     | __main__:main:16 - Prediction on test data from config: [1]
2025-03-10 15:24:08.878 | INFO     | __main__:main:25 - Prediction on test json: [1]
2025-03-10 15:29:03.460 | INFO     | __main__:main:12 - Starting model service
2025-03-10 15:29:03.475 | INFO     | __main__:main:16 - Prediction on test data from config: [1]
2025-03-10 15:29:03.478 | INFO     | __main__:main:25 - Prediction on test json: [1]
2025-03-10 15:50:54.384 | INFO     | inference:predict:77 - Received Input Data: {'age': 30, 'income': 50000.0, 'employment_type': 'full-time', 'marital_status': 'single', 'time_spent_on_platform': 120.5, 'number_of_sessions': 10, 'fields_filled_percentage': 80.0, 'previous_year_filing': 1, 'device_type': 'mobile', 'referral_source': 'friend'}
2025-03-10 15:50:54.399 | INFO     | inference:process_input:62 - Processed input data:    age   income  ... sessions_per_minute fields_filled_x_sessions
0   30  50000.0  ...                   0                      800

[1 rows x 12 columns]
2025-03-10 15:50:54.399 | ERROR    | inference:predict:84 - Error during prediction: 'DataFrame' object has no attribute 'model_dump'
2025-03-10 15:52:25.192 | INFO     | inference:predict:77 - Received Input Data: age=30 income=50000.0 employment_type='full-time' marital_status='single' time_spent_on_platform=120.5 number_of_sessions=10 fields_filled_percentage=80.0 previous_year_filing=1 device_type='mobile' referral_source='friend'
2025-03-10 15:52:25.201 | INFO     | inference:process_input:62 - Processed input data:    age   income employment_type  ... referral_source  sessions_per_minute  fields_filled_x_sessions
0   30  50000.0       full-time  ...          friend                    0                       800

[1 rows x 12 columns]
2025-03-10 15:52:25.201 | ERROR    | inference:predict:84 - Error during prediction: 'DataFrame' object has no attribute 'model_dump'
2025-03-10 15:53:01.940 | INFO     | inference:predict:77 - Received Input Data: age=30 income=50000.0 employment_type='full-time' marital_status='single' time_spent_on_platform=120.5 number_of_sessions=10 fields_filled_percentage=80.0 previous_year_filing=1 device_type='mobile' referral_source='friend'
2025-03-10 15:53:01.949 | INFO     | inference:process_input:62 - Processed input data:    age   income employment_type  ... referral_source  sessions_per_minute  fields_filled_x_sessions
0   30  50000.0       full-time  ...          friend                    0                       800

[1 rows x 12 columns]
2025-03-10 15:53:01.951 | INFO     | inference:predict:79 - Received processed input:    age   income employment_type  ... referral_source  sessions_per_minute  fields_filled_x_sessions
0   30  50000.0       full-time  ...          friend                    0                       800

[1 rows x 12 columns]
2025-03-10 15:53:02.105 | ERROR    | inference:predict:84 - Error during prediction: Invalid type for cat_feature[non-default value idx=0,feature_idx=1]=50000.0 : cat_features must be integer or string, real number values and NaN values should be converted to string.
2025-03-10 15:55:10.144 | INFO     | inference:predict:77 - Received Input Data: age=30 income=50000.0 employment_type='full-time' marital_status='single' time_spent_on_platform=120.5 number_of_sessions=10 fields_filled_percentage=80.0 previous_year_filing=1 device_type='mobile' referral_source='friend'
2025-03-10 15:55:10.152 | INFO     | inference:process_input:62 - Processed input data:    age   income employment_type  ... referral_source  sessions_per_minute  fields_filled_x_sessions
0   30  50000.0       full-time  ...          friend                    0                       800

[1 rows x 12 columns]
2025-03-10 15:55:10.156 | INFO     | inference:predict:79 - Received processed input:    age   income employment_type  ... referral_source  sessions_per_minute  fields_filled_x_sessions
0   30  50000.0       full-time  ...          friend                    0                       800

[1 rows x 12 columns]
2025-03-10 15:56:12.193 | INFO     | __main__:main:12 - Starting model service
2025-03-10 15:56:12.209 | INFO     | __main__:main:16 - Prediction on test data from config: [1]
2025-03-10 15:56:12.212 | INFO     | __main__:main:25 - Prediction on test json: [1]
2025-03-10 14:57:17.791 | INFO     | inference:predict:77 - Received Input Data: age=30 income=50000.0 employment_type='full-time' marital_status='single' time_spent_on_platform=120.5 number_of_sessions=10 fields_filled_percentage=80.0 previous_year_filing=1 device_type='mobile' referral_source='friend'
2025-03-10 14:57:17.818 | INFO     | inference:process_input:62 - Processed input data:    age   income  ... sessions_per_minute fields_filled_x_sessions
0   30  50000.0  ...                   0                      800

[1 rows x 12 columns]
2025-03-10 14:57:17.823 | INFO     | inference:predict:79 - Received processed input:    age   income  ... sessions_per_minute fields_filled_x_sessions
0   30  50000.0  ...                   0                      800

[1 rows x 12 columns]
2025-03-12 10:08:17.122 | INFO     | __main__:main:12 - Starting model service
2025-03-12 10:08:17.123 | INFO     | model_service:load_model:18 - Model catboost_model_v1.pkl not found
2025-03-12 10:08:17.123 | INFO     | collection:load_data_from_db:12 - Loading data from database
2025-03-12 10:08:17.177 | INFO     | model:train_model:32 - Training model
2025-03-12 10:08:18.418 | INFO     | model:evaluate_model:48 - F1 score: 0.7500699066347629
2025-03-12 10:08:18.420 | INFO     | model:save_model:54 - Saving model into directory
2025-03-12 10:08:18.420 | INFO     | model_service:load_model:20 - Model catboost_model_v1.pkl trained and saved
2025-03-12 10:08:18.429 | INFO     | __main__:main:16 - Prediction on test data from config: [1]
2025-03-12 10:08:18.433 | INFO     | __main__:main:25 - Prediction on test json: [1]
2025-03-12 10:55:26.514 | INFO     | __main__:main:12 - Starting model service
2025-03-12 10:55:26.538 | INFO     | __main__:main:16 - Prediction on test data from config: [1]
2025-03-12 10:55:26.543 | INFO     | __main__:main:25 - Prediction on test json: [1]
2025-03-12 11:33:24.343 | INFO     | __main__:main:12 - Starting model service
2025-03-12 11:33:24.366 | INFO     | __main__:main:16 - Prediction on test data from config: [1]
2025-03-12 11:33:24.370 | INFO     | __main__:main:25 - Prediction on test json: [1]
2025-03-12 23:27:57.472 | INFO     | __main__:main:36 - Starting model service
2025-03-12 23:27:57.490 | INFO     | __main__:main:40 - Prediction on test data from config: [1]
2025-03-12 23:27:57.494 | INFO     | __main__:main:49 - Prediction on test json: [1]
2025-03-12 23:29:00.712 | INFO     | __main__:main:36 - Starting model service
2025-03-12 23:29:00.718 | INFO     | __main__:main:40 - Prediction on test data from config: [1]
2025-03-12 23:29:00.729 | INFO     | __main__:main:51 - Prediction on test json: [1]
2025-03-12 23:30:57.310 | INFO     | __main__:main:36 - Starting model service
2025-03-12 23:30:57.311 | INFO     | __main__:main:39 - settings.test_data:
2025-03-12 23:30:57.313 | INFO     | __main__:main:40 - pd.DataFrame(process_features([settings.test_data])):
2025-03-12 23:30:57.318 | INFO     | __main__:main:42 - Prediction on test data from config: [1]
2025-03-12 23:30:57.320 | INFO     | __main__:main:50 - test_json:
2025-03-12 23:30:57.320 | INFO     | __main__:main:51 - test_df:
2025-03-12 23:30:57.323 | INFO     | __main__:main:53 - Prediction on test json: [1]
2025-03-12 23:39:12.304 | INFO     | __main__:main:36 - Starting model service
2025-03-12 23:39:12.308 | INFO     | __main__:main:39 - settings.test_data: {settings.test_data}
2025-03-12 23:39:12.331 | INFO     | __main__:main:42 - Prediction on test data from config: [1]
2025-03-12 23:39:12.333 | INFO     | __main__:main:50 - test_json: {test_json}
2025-03-12 23:39:12.333 | INFO     | __main__:main:51 - test_df: {test_df}
2025-03-12 23:39:12.334 | INFO     | __main__:main:53 - Prediction on test json: [1]
2025-03-12 23:40:38.094 | INFO     | __main__:main:36 - Starting model service
2025-03-12 23:40:38.099 | INFO     | __main__:main:39 - settings.test_data: {'age': 30, 'income': 45000, 'employment_type': 'full_time', 'marital_status': 'single', 'time_spent_on_platform': 120, 'number_of_sessions': 5, 'fields_filled_percentage': 80, 'previous_year_filing': 1, 'device_type': 'mobile', 'referral_source': 'friend_referral'}
2025-03-12 23:40:38.109 | INFO     | __main__:main:40 - processed features:    age   income employment_type  ...  referral_source  sessions_per_minute  fields_filled_x_sessions
0   30  45000.0       full_time  ...  friend_referral                    0                       400

[1 rows x 12 columns]
2025-03-12 23:40:38.122 | INFO     | __main__:main:42 - Prediction on test data from config: [1]
2025-03-12 23:40:38.128 | INFO     | __main__:main:50 - test_json:    age   income employment_type  ... referral_source  sessions_per_minute  fields_filled_x_sessions
0   30  50000.0       full-time  ...          friend                    0                       800

[1 rows x 12 columns]
2025-03-12 23:40:38.131 | INFO     | __main__:main:51 - test_df:    age   income employment_type  ... referral_source  sessions_per_minute  fields_filled_x_sessions
0   30  50000.0       full-time  ...          friend                    0                       800

[1 rows x 12 columns]
2025-03-12 23:40:38.132 | INFO     | __main__:main:53 - Prediction on test json: [1]
2025-03-12 23:46:38.034 | INFO     | __main__:main:36 - Starting model service
2025-03-12 23:46:38.034 | INFO     | model_service:load_model:54 - Model catboost_model_v1.pkl not found
2025-03-12 23:46:38.034 | INFO     | collection:load_data_from_db:40 - Loading data from database
2025-03-12 23:46:38.034 | ERROR    | __main__:<module>:56 - An error has been caught in function '<module>', process 'MainProcess' (52043), thread 'MainThread' (8323484672):
Traceback (most recent call last):

> File "/Users/anotherbadcode/Downloads/TaxFix-App/runner.py", line 56, in <module>
    main()
    └ <function main at 0x102351b20>

  File "/Users/anotherbadcode/Downloads/TaxFix-App/runner.py", line 38, in main
    ml_svc.load_model()
    │      └ <function ModelService.load_model at 0x133071580>
    └ <model_service.ModelService object at 0x1321be310>

  File "/Users/anotherbadcode/Downloads/TaxFix-App/model_service.py", line 55, in load_model
    build_model()
    └ <function build_model at 0x120c4b6a0>

  File "/Users/anotherbadcode/Downloads/TaxFix-App/model.py", line 13, in build_model
    df = process_input()
         └ <function process_input at 0x1321f9a80>

  File "/Users/anotherbadcode/Downloads/TaxFix-App/preparation.py", line 21, in process_input
    df = load_data_from_db()
         └ <function load_data_from_db at 0x1321f9c60>

  File "/Users/anotherbadcode/Downloads/TaxFix-App/collection.py", line 42, in load_data_from_db
    return pd.read_sql(query, settings.engine)
           │  │        │      └ Settings(model_dir=PosixPath('models'), model_filename='catboost_model_v1.pkl', model_path='models/catboost_model_v1.pkl', da...
           │  │        └ <sqlalchemy.sql.selectable.Select object at 0x124c8cbd0>
           │  └ <function read_sql at 0x120840ae0>
           └ <module 'pandas' from '/Users/anotherbadcode/Library/Caches/pypoetry/virtualenvs/taxfix-app-9B8dhDvo-py3.11/lib/python3.11/si...

  File "/Users/anotherbadcode/Library/Caches/pypoetry/virtualenvs/taxfix-app-9B8dhDvo-py3.11/lib/python3.11/site-packages/pydantic/main.py", line 891, in __getattr__
    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')

AttributeError: 'Settings' object has no attribute 'engine'
2025-03-12 23:48:05.651 | INFO     | __main__:main:36 - Starting model service
2025-03-12 23:48:05.652 | INFO     | model_service:load_model:54 - Model catboost_model_v1.pkl not found
2025-03-12 23:48:05.652 | INFO     | collection:load_data_from_db:40 - Loading data from database
2025-03-12 23:48:05.655 | ERROR    | __main__:<module>:56 - An error has been caught in function '<module>', process 'MainProcess' (52105), thread 'MainThread' (8323484672):
Traceback (most recent call last):

  File "/Users/anotherbadcode/Library/Caches/pypoetry/virtualenvs/taxfix-app-9B8dhDvo-py3.11/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
    │    │       └ <function DefaultDialect.do_execute at 0x12cb49800>
    │    └ <sqlalchemy.dialects.sqlite.pysqlite.SQLiteDialect_pysqlite object at 0x12cb63510>
    └ <sqlalchemy.engine.base.Connection object at 0x12cb4e550>
  File "/Users/anotherbadcode/Library/Caches/pypoetry/virtualenvs/taxfix-app-9B8dhDvo-py3.11/lib/python3.11/site-packages/sqlalchemy/engine/default.py", line 942, in do_execute
    cursor.execute(statement, parameters)
    │      │       │          └ ()
    │      │       └ 'SELECT dataset.age, dataset.income, dataset.employment_type, dataset.marital_status, dataset.time_spent_on_platform, dataset...
    │      └ <method 'execute' of 'sqlite3.Cursor' objects>
    └ <sqlite3.Cursor object at 0x12d2940c0>

sqlite3.OperationalError: no such table: dataset


The above exception was the direct cause of the following exception:


Traceback (most recent call last):

> File "/Users/anotherbadcode/Downloads/TaxFix-App/runner.py", line 56, in <module>
    main()
    └ <function main at 0x1043f5b20>

  File "/Users/anotherbadcode/Downloads/TaxFix-App/runner.py", line 38, in main
    ml_svc.load_model()
    │      └ <function ModelService.load_model at 0x12d271440>
    └ <model_service.ModelService object at 0x11c87d290>

  File "/Users/anotherbadcode/Downloads/TaxFix-App/model_service.py", line 55, in load_model
    build_model()
    └ <function build_model at 0x11c61a020>

  File "/Users/anotherbadcode/Downloads/TaxFix-App/model.py", line 13, in build_model
    df = process_input()
         └ <function process_input at 0x12cb99940>

  File "/Users/anotherbadcode/Downloads/TaxFix-App/preparation.py", line 21, in process_input
    df = load_data_from_db()
         └ <function load_data_from_db at 0x12cb99b20>

  File "/Users/anotherbadcode/Downloads/TaxFix-App/collection.py", line 42, in load_data_from_db
    return pd.read_sql(query, engine)
           │  │        │      └ Engine(sqlite:///db.sqlite)
           │  │        └ <sqlalchemy.sql.selectable.Select object at 0x128c562d0>
           │  └ <function read_sql at 0x11c210ae0>
           └ <module 'pandas' from '/Users/anotherbadcode/Library/Caches/pypoetry/virtualenvs/taxfix-app-9B8dhDvo-py3.11/lib/python3.11/si...

  File "/Users/anotherbadcode/Library/Caches/pypoetry/virtualenvs/taxfix-app-9B8dhDvo-py3.11/lib/python3.11/site-packages/pandas/io/sql.py", line 734, in read_sql
    return pandas_sql.read_query(
           │          └ <function SQLDatabase.read_query at 0x11c212520>
           └ <pandas.io.sql.SQLDatabase object at 0x12d25e7d0>
  File "/Users/anotherbadcode/Library/Caches/pypoetry/virtualenvs/taxfix-app-9B8dhDvo-py3.11/lib/python3.11/site-packages/pandas/io/sql.py", line 1836, in read_query
    result = self.execute(sql, params)
             │    │       │    └ None
             │    │       └ <sqlalchemy.sql.selectable.Select object at 0x128c562d0>
             │    └ <function SQLDatabase.execute at 0x11c212340>
             └ <pandas.io.sql.SQLDatabase object at 0x12d25e7d0>
  File "/Users/anotherbadcode/Library/Caches/pypoetry/virtualenvs/taxfix-app-9B8dhDvo-py3.11/lib/python3.11/site-packages/pandas/io/sql.py", line 1660, in execute
    return self.con.execute(sql, *args)
           │    │   │       │     └ []
           │    │   │       └ <sqlalchemy.sql.selectable.Select object at 0x128c562d0>
           │    │   └ <function Connection.execute at 0x12ca82160>
           │    └ <sqlalchemy.engine.base.Connection object at 0x12cb4e550>
           └ <pandas.io.sql.SQLDatabase object at 0x12d25e7d0>
  File "/Users/anotherbadcode/Library/Caches/pypoetry/virtualenvs/taxfix-app-9B8dhDvo-py3.11/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1416, in execute
    return meth(
           └ <bound method ClauseElement._execute_on_connection of <sqlalchemy.sql.selectable.Select object at 0x128c562d0>>
  File "/Users/anotherbadcode/Library/Caches/pypoetry/virtualenvs/taxfix-app-9B8dhDvo-py3.11/lib/python3.11/site-packages/sqlalchemy/sql/elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
           │          └ <function Connection._execute_clauseelement at 0x12ca82480>
           └ <sqlalchemy.engine.base.Connection object at 0x12cb4e550>
  File "/Users/anotherbadcode/Library/Caches/pypoetry/virtualenvs/taxfix-app-9B8dhDvo-py3.11/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1638, in _execute_clauseelement
    ret = self._execute_context(
          │    └ <function Connection._execute_context at 0x12ca82660>
          └ <sqlalchemy.engine.base.Connection object at 0x12cb4e550>
  File "/Users/anotherbadcode/Library/Caches/pypoetry/virtualenvs/taxfix-app-9B8dhDvo-py3.11/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1843, in _execute_context
    return self._exec_single_context(
           │    └ <function Connection._exec_single_context at 0x12ca82700>
           └ <sqlalchemy.engine.base.Connection object at 0x12cb4e550>
  File "/Users/anotherbadcode/Library/Caches/pypoetry/virtualenvs/taxfix-app-9B8dhDvo-py3.11/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1983, in _exec_single_context
    self._handle_dbapi_exception(
    │    └ <function Connection._handle_dbapi_exception at 0x12ca82980>
    └ <sqlalchemy.engine.base.Connection object at 0x12cb4e550>
  File "/Users/anotherbadcode/Library/Caches/pypoetry/virtualenvs/taxfix-app-9B8dhDvo-py3.11/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 2352, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
          │                    │              │                 └ OperationalError('no such table: dataset')
          │                    │              └ (<class 'sqlite3.OperationalError'>, OperationalError('no such table: dataset'), <traceback object at 0x12cb4dd00>)
          │                    └ <method 'with_traceback' of 'BaseException' objects>
          └ OperationalError('(sqlite3.OperationalError) no such table: dataset')
  File "/Users/anotherbadcode/Library/Caches/pypoetry/virtualenvs/taxfix-app-9B8dhDvo-py3.11/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
    │    │       └ <function DefaultDialect.do_execute at 0x12cb49800>
    │    └ <sqlalchemy.dialects.sqlite.pysqlite.SQLiteDialect_pysqlite object at 0x12cb63510>
    └ <sqlalchemy.engine.base.Connection object at 0x12cb4e550>
  File "/Users/anotherbadcode/Library/Caches/pypoetry/virtualenvs/taxfix-app-9B8dhDvo-py3.11/lib/python3.11/site-packages/sqlalchemy/engine/default.py", line 942, in do_execute
    cursor.execute(statement, parameters)
    │      │       │          └ ()
    │      │       └ 'SELECT dataset.age, dataset.income, dataset.employment_type, dataset.marital_status, dataset.time_spent_on_platform, dataset...
    │      └ <method 'execute' of 'sqlite3.Cursor' objects>
    └ <sqlite3.Cursor object at 0x12d2940c0>

sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: dataset
[SQL: SELECT dataset.age, dataset.income, dataset.employment_type, dataset.marital_status, dataset.time_spent_on_platform, dataset.number_of_sessions, dataset.fields_filled_percentage, dataset.previous_year_filing, dataset.device_type, dataset.referral_source, dataset.completed_filing 
FROM dataset]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-03-12 23:50:47.456 | INFO     | __main__:main:36 - Starting model service
2025-03-12 23:50:47.456 | INFO     | model_service:load_model:54 - Model catboost_model_v1.pkl not found
2025-03-12 23:50:47.456 | INFO     | collection:load_data_from_db:40 - Loading data from database
2025-03-12 23:50:47.459 | ERROR    | __main__:<module>:56 - An error has been caught in function '<module>', process 'MainProcess' (52163), thread 'MainThread' (8323484672):
Traceback (most recent call last):

  File "/Users/anotherbadcode/Library/Caches/pypoetry/virtualenvs/taxfix-app-9B8dhDvo-py3.11/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
    │    │       └ <function DefaultDialect.do_execute at 0x158649800>
    │    └ <sqlalchemy.dialects.sqlite.pysqlite.SQLiteDialect_pysqlite object at 0x1586624d0>
    └ <sqlalchemy.engine.base.Connection object at 0x15af75010>
  File "/Users/anotherbadcode/Library/Caches/pypoetry/virtualenvs/taxfix-app-9B8dhDvo-py3.11/lib/python3.11/site-packages/sqlalchemy/engine/default.py", line 942, in do_execute
    cursor.execute(statement, parameters)
    │      │       │          └ ()
    │      │       └ 'SELECT dataset.age, dataset.income, dataset.employment_type, dataset.marital_status, dataset.time_spent_on_platform, dataset...
    │      └ <method 'execute' of 'sqlite3.Cursor' objects>
    └ <sqlite3.Cursor object at 0x15af94040>

sqlite3.OperationalError: no such table: dataset


The above exception was the direct cause of the following exception:


Traceback (most recent call last):

> File "/Users/anotherbadcode/Downloads/TaxFix-App/runner.py", line 56, in <module>
    main()
    └ <function main at 0x100711b20>

  File "/Users/anotherbadcode/Downloads/TaxFix-App/runner.py", line 38, in main
    ml_svc.load_model()
    │      └ <function ModelService.load_model at 0x15af71440>
    └ <model_service.ModelService object at 0x1586629d0>

  File "/Users/anotherbadcode/Downloads/TaxFix-App/model_service.py", line 55, in load_model
    build_model()
    └ <function build_model at 0x152d1a020>

  File "/Users/anotherbadcode/Downloads/TaxFix-App/model.py", line 13, in build_model
    df = process_input()
         └ <function process_input at 0x158699940>

  File "/Users/anotherbadcode/Downloads/TaxFix-App/preparation.py", line 21, in process_input
    df = load_data_from_db()
         └ <function load_data_from_db at 0x158699b20>

  File "/Users/anotherbadcode/Downloads/TaxFix-App/collection.py", line 42, in load_data_from_db
    return pd.read_sql(query, engine)
           │  │        │      └ Engine(sqlite:///db.sqlite)
           │  │        └ <sqlalchemy.sql.selectable.Select object at 0x157d48bd0>
           │  └ <function read_sql at 0x152910ae0>
           └ <module 'pandas' from '/Users/anotherbadcode/Library/Caches/pypoetry/virtualenvs/taxfix-app-9B8dhDvo-py3.11/lib/python3.11/si...

  File "/Users/anotherbadcode/Library/Caches/pypoetry/virtualenvs/taxfix-app-9B8dhDvo-py3.11/lib/python3.11/site-packages/pandas/io/sql.py", line 734, in read_sql
    return pandas_sql.read_query(
           │          └ <function SQLDatabase.read_query at 0x152912520>
           └ <pandas.io.sql.SQLDatabase object at 0x158662210>
  File "/Users/anotherbadcode/Library/Caches/pypoetry/virtualenvs/taxfix-app-9B8dhDvo-py3.11/lib/python3.11/site-packages/pandas/io/sql.py", line 1836, in read_query
    result = self.execute(sql, params)
             │    │       │    └ None
             │    │       └ <sqlalchemy.sql.selectable.Select object at 0x157d48bd0>
             │    └ <function SQLDatabase.execute at 0x152912340>
             └ <pandas.io.sql.SQLDatabase object at 0x158662210>
  File "/Users/anotherbadcode/Library/Caches/pypoetry/virtualenvs/taxfix-app-9B8dhDvo-py3.11/lib/python3.11/site-packages/pandas/io/sql.py", line 1660, in execute
    return self.con.execute(sql, *args)
           │    │   │       │     └ []
           │    │   │       └ <sqlalchemy.sql.selectable.Select object at 0x157d48bd0>
           │    │   └ <function Connection.execute at 0x158582160>
           │    └ <sqlalchemy.engine.base.Connection object at 0x15af75010>
           └ <pandas.io.sql.SQLDatabase object at 0x158662210>
  File "/Users/anotherbadcode/Library/Caches/pypoetry/virtualenvs/taxfix-app-9B8dhDvo-py3.11/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1416, in execute
    return meth(
           └ <bound method ClauseElement._execute_on_connection of <sqlalchemy.sql.selectable.Select object at 0x157d48bd0>>
  File "/Users/anotherbadcode/Library/Caches/pypoetry/virtualenvs/taxfix-app-9B8dhDvo-py3.11/lib/python3.11/site-packages/sqlalchemy/sql/elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
           │          └ <function Connection._execute_clauseelement at 0x158582480>
           └ <sqlalchemy.engine.base.Connection object at 0x15af75010>
  File "/Users/anotherbadcode/Library/Caches/pypoetry/virtualenvs/taxfix-app-9B8dhDvo-py3.11/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1638, in _execute_clauseelement
    ret = self._execute_context(
          │    └ <function Connection._execute_context at 0x158582660>
          └ <sqlalchemy.engine.base.Connection object at 0x15af75010>
  File "/Users/anotherbadcode/Library/Caches/pypoetry/virtualenvs/taxfix-app-9B8dhDvo-py3.11/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1843, in _execute_context
    return self._exec_single_context(
           │    └ <function Connection._exec_single_context at 0x158582700>
           └ <sqlalchemy.engine.base.Connection object at 0x15af75010>
  File "/Users/anotherbadcode/Library/Caches/pypoetry/virtualenvs/taxfix-app-9B8dhDvo-py3.11/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1983, in _exec_single_context
    self._handle_dbapi_exception(
    │    └ <function Connection._handle_dbapi_exception at 0x158582980>
    └ <sqlalchemy.engine.base.Connection object at 0x15af75010>
  File "/Users/anotherbadcode/Library/Caches/pypoetry/virtualenvs/taxfix-app-9B8dhDvo-py3.11/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 2352, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
          │                    │              │                 └ OperationalError('no such table: dataset')
          │                    │              └ (<class 'sqlite3.OperationalError'>, OperationalError('no such table: dataset'), <traceback object at 0x15af76a00>)
          │                    └ <method 'with_traceback' of 'BaseException' objects>
          └ OperationalError('(sqlite3.OperationalError) no such table: dataset')
  File "/Users/anotherbadcode/Library/Caches/pypoetry/virtualenvs/taxfix-app-9B8dhDvo-py3.11/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
    │    │       └ <function DefaultDialect.do_execute at 0x158649800>
    │    └ <sqlalchemy.dialects.sqlite.pysqlite.SQLiteDialect_pysqlite object at 0x1586624d0>
    └ <sqlalchemy.engine.base.Connection object at 0x15af75010>
  File "/Users/anotherbadcode/Library/Caches/pypoetry/virtualenvs/taxfix-app-9B8dhDvo-py3.11/lib/python3.11/site-packages/sqlalchemy/engine/default.py", line 942, in do_execute
    cursor.execute(statement, parameters)
    │      │       │          └ ()
    │      │       └ 'SELECT dataset.age, dataset.income, dataset.employment_type, dataset.marital_status, dataset.time_spent_on_platform, dataset...
    │      └ <method 'execute' of 'sqlite3.Cursor' objects>
    └ <sqlite3.Cursor object at 0x15af94040>

sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: dataset
[SQL: SELECT dataset.age, dataset.income, dataset.employment_type, dataset.marital_status, dataset.time_spent_on_platform, dataset.number_of_sessions, dataset.fields_filled_percentage, dataset.previous_year_filing, dataset.device_type, dataset.referral_source, dataset.completed_filing 
FROM dataset]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-03-12 23:53:24.158 | INFO     | __main__:main:36 - Starting model service
2025-03-12 23:53:24.159 | INFO     | model_service:load_model:54 - Model catboost_model_v1.pkl not found
2025-03-12 23:53:24.159 | INFO     | collection:load_data_from_db:40 - Loading data from database
2025-03-12 23:53:24.162 | ERROR    | __main__:<module>:56 - An error has been caught in function '<module>', process 'MainProcess' (52438), thread 'MainThread' (8323484672):
Traceback (most recent call last):

  File "/Users/anotherbadcode/Library/Caches/pypoetry/virtualenvs/taxfix-app-9B8dhDvo-py3.11/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
    │    │       └ <function DefaultDialect.do_execute at 0x12be49800>
    │    └ <sqlalchemy.dialects.sqlite.pysqlite.SQLiteDialect_pysqlite object at 0x12be62a90>
    └ <sqlalchemy.engine.base.Connection object at 0x12be62110>
  File "/Users/anotherbadcode/Library/Caches/pypoetry/virtualenvs/taxfix-app-9B8dhDvo-py3.11/lib/python3.11/site-packages/sqlalchemy/engine/default.py", line 942, in do_execute
    cursor.execute(statement, parameters)
    │      │       │          └ ()
    │      │       └ 'SELECT dataset.age, dataset.income, dataset.employment_type, dataset.marital_status, dataset.time_spent_on_platform, dataset...
    │      └ <method 'execute' of 'sqlite3.Cursor' objects>
    └ <sqlite3.Cursor object at 0x12c3f40c0>

sqlite3.OperationalError: no such table: dataset


The above exception was the direct cause of the following exception:


Traceback (most recent call last):

> File "/Users/anotherbadcode/Downloads/TaxFix-App/runner.py", line 56, in <module>
    main()
    └ <function main at 0x102491b20>

  File "/Users/anotherbadcode/Downloads/TaxFix-App/runner.py", line 38, in main
    ml_svc.load_model()
    │      └ <function ModelService.load_model at 0x12c3d1440>
    └ <model_service.ModelService object at 0x11f392110>

  File "/Users/anotherbadcode/Downloads/TaxFix-App/model_service.py", line 55, in load_model
    build_model()
    └ <function build_model at 0x118d1a020>

  File "/Users/anotherbadcode/Downloads/TaxFix-App/model.py", line 13, in build_model
    df = process_input()
         └ <function process_input at 0x12be99940>

  File "/Users/anotherbadcode/Downloads/TaxFix-App/preparation.py", line 21, in process_input
    df = load_data_from_db()
         └ <function load_data_from_db at 0x12be99b20>

  File "/Users/anotherbadcode/Downloads/TaxFix-App/collection.py", line 42, in load_data_from_db
    return pd.read_sql(query, engine)
           │  │        │      └ Engine(sqlite:///db.sqlite)
           │  │        └ <sqlalchemy.sql.selectable.Select object at 0x12c3c3e50>
           │  └ <function read_sql at 0x118910ae0>
           └ <module 'pandas' from '/Users/anotherbadcode/Library/Caches/pypoetry/virtualenvs/taxfix-app-9B8dhDvo-py3.11/lib/python3.11/si...

  File "/Users/anotherbadcode/Library/Caches/pypoetry/virtualenvs/taxfix-app-9B8dhDvo-py3.11/lib/python3.11/site-packages/pandas/io/sql.py", line 734, in read_sql
    return pandas_sql.read_query(
           │          └ <function SQLDatabase.read_query at 0x118912520>
           └ <pandas.io.sql.SQLDatabase object at 0x11d25d4d0>
  File "/Users/anotherbadcode/Library/Caches/pypoetry/virtualenvs/taxfix-app-9B8dhDvo-py3.11/lib/python3.11/site-packages/pandas/io/sql.py", line 1836, in read_query
    result = self.execute(sql, params)
             │    │       │    └ None
             │    │       └ <sqlalchemy.sql.selectable.Select object at 0x12c3c3e50>
             │    └ <function SQLDatabase.execute at 0x118912340>
             └ <pandas.io.sql.SQLDatabase object at 0x11d25d4d0>
  File "/Users/anotherbadcode/Library/Caches/pypoetry/virtualenvs/taxfix-app-9B8dhDvo-py3.11/lib/python3.11/site-packages/pandas/io/sql.py", line 1660, in execute
    return self.con.execute(sql, *args)
           │    │   │       │     └ []
           │    │   │       └ <sqlalchemy.sql.selectable.Select object at 0x12c3c3e50>
           │    │   └ <function Connection.execute at 0x12bc82160>
           │    └ <sqlalchemy.engine.base.Connection object at 0x12be62110>
           └ <pandas.io.sql.SQLDatabase object at 0x11d25d4d0>
  File "/Users/anotherbadcode/Library/Caches/pypoetry/virtualenvs/taxfix-app-9B8dhDvo-py3.11/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1416, in execute
    return meth(
           └ <bound method ClauseElement._execute_on_connection of <sqlalchemy.sql.selectable.Select object at 0x12c3c3e50>>
  File "/Users/anotherbadcode/Library/Caches/pypoetry/virtualenvs/taxfix-app-9B8dhDvo-py3.11/lib/python3.11/site-packages/sqlalchemy/sql/elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
           │          └ <function Connection._execute_clauseelement at 0x12bc82480>
           └ <sqlalchemy.engine.base.Connection object at 0x12be62110>
  File "/Users/anotherbadcode/Library/Caches/pypoetry/virtualenvs/taxfix-app-9B8dhDvo-py3.11/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1638, in _execute_clauseelement
    ret = self._execute_context(
          │    └ <function Connection._execute_context at 0x12bc82660>
          └ <sqlalchemy.engine.base.Connection object at 0x12be62110>
  File "/Users/anotherbadcode/Library/Caches/pypoetry/virtualenvs/taxfix-app-9B8dhDvo-py3.11/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1843, in _execute_context
    return self._exec_single_context(
           │    └ <function Connection._exec_single_context at 0x12bc82700>
           └ <sqlalchemy.engine.base.Connection object at 0x12be62110>
  File "/Users/anotherbadcode/Library/Caches/pypoetry/virtualenvs/taxfix-app-9B8dhDvo-py3.11/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1983, in _exec_single_context
    self._handle_dbapi_exception(
    │    └ <function Connection._handle_dbapi_exception at 0x12bc82980>
    └ <sqlalchemy.engine.base.Connection object at 0x12be62110>
  File "/Users/anotherbadcode/Library/Caches/pypoetry/virtualenvs/taxfix-app-9B8dhDvo-py3.11/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 2352, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
          │                    │              │                 └ OperationalError('no such table: dataset')
          │                    │              └ (<class 'sqlite3.OperationalError'>, OperationalError('no such table: dataset'), <traceback object at 0x12c3d5600>)
          │                    └ <method 'with_traceback' of 'BaseException' objects>
          └ OperationalError('(sqlite3.OperationalError) no such table: dataset')
  File "/Users/anotherbadcode/Library/Caches/pypoetry/virtualenvs/taxfix-app-9B8dhDvo-py3.11/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
    │    │       └ <function DefaultDialect.do_execute at 0x12be49800>
    │    └ <sqlalchemy.dialects.sqlite.pysqlite.SQLiteDialect_pysqlite object at 0x12be62a90>
    └ <sqlalchemy.engine.base.Connection object at 0x12be62110>
  File "/Users/anotherbadcode/Library/Caches/pypoetry/virtualenvs/taxfix-app-9B8dhDvo-py3.11/lib/python3.11/site-packages/sqlalchemy/engine/default.py", line 942, in do_execute
    cursor.execute(statement, parameters)
    │      │       │          └ ()
    │      │       └ 'SELECT dataset.age, dataset.income, dataset.employment_type, dataset.marital_status, dataset.time_spent_on_platform, dataset...
    │      └ <method 'execute' of 'sqlite3.Cursor' objects>
    └ <sqlite3.Cursor object at 0x12c3f40c0>

sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: dataset
[SQL: SELECT dataset.age, dataset.income, dataset.employment_type, dataset.marital_status, dataset.time_spent_on_platform, dataset.number_of_sessions, dataset.fields_filled_percentage, dataset.previous_year_filing, dataset.device_type, dataset.referral_source, dataset.completed_filing 
FROM dataset]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-03-12 23:56:22.279 | INFO     | __main__:main:36 - Starting model service
2025-03-12 23:56:22.279 | INFO     | model_service:load_model:54 - Model catboost_model_v1.pkl not found
2025-03-12 23:56:22.279 | INFO     | collection:load_data_from_db:40 - Loading data from database
2025-03-12 23:56:22.284 | ERROR    | __main__:<module>:56 - An error has been caught in function '<module>', process 'MainProcess' (52581), thread 'MainThread' (8323484672):
Traceback (most recent call last):

  File "/Users/anotherbadcode/Library/Caches/pypoetry/virtualenvs/taxfix-app-9B8dhDvo-py3.11/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
    │    │       └ <function DefaultDialect.do_execute at 0x12c949800>
    │    └ <sqlalchemy.dialects.sqlite.pysqlite.SQLiteDialect_pysqlite object at 0x12c963050>
    └ <sqlalchemy.engine.base.Connection object at 0x12ced4b50>
  File "/Users/anotherbadcode/Library/Caches/pypoetry/virtualenvs/taxfix-app-9B8dhDvo-py3.11/lib/python3.11/site-packages/sqlalchemy/engine/default.py", line 942, in do_execute
    cursor.execute(statement, parameters)
    │      │       │          └ ()
    │      │       └ 'SELECT dataset.age, dataset.income, dataset.employment_type, dataset.marital_status, dataset.time_spent_on_platform, dataset...
    │      └ <method 'execute' of 'sqlite3.Cursor' objects>
    └ <sqlite3.Cursor object at 0x12cef4040>

sqlite3.OperationalError: no such table: dataset


The above exception was the direct cause of the following exception:


Traceback (most recent call last):

> File "/Users/anotherbadcode/Downloads/TaxFix-App/runner.py", line 56, in <module>
    main()
    └ <function main at 0x102ff5b20>

  File "/Users/anotherbadcode/Downloads/TaxFix-App/runner.py", line 38, in main
    ml_svc.load_model()
    │      └ <function ModelService.load_model at 0x12ced1440>
    └ <model_service.ModelService object at 0x128068510>

  File "/Users/anotherbadcode/Downloads/TaxFix-App/model_service.py", line 55, in load_model
    build_model()
    └ <function build_model at 0x11bbc2020>

  File "/Users/anotherbadcode/Downloads/TaxFix-App/model.py", line 13, in build_model
    df = process_input()
         └ <function process_input at 0x12c99d940>

  File "/Users/anotherbadcode/Downloads/TaxFix-App/preparation.py", line 21, in process_input
    df = load_data_from_db()
         └ <function load_data_from_db at 0x12c99db20>

  File "/Users/anotherbadcode/Downloads/TaxFix-App/collection.py", line 42, in load_data_from_db
    return pd.read_sql(query, engine)
           │  │        │      └ Engine(sqlite:///db.sqlite)
           │  │        └ <sqlalchemy.sql.selectable.Select object at 0x12c962010>
           │  └ <function read_sql at 0x11b88cae0>
           └ <module 'pandas' from '/Users/anotherbadcode/Library/Caches/pypoetry/virtualenvs/taxfix-app-9B8dhDvo-py3.11/lib/python3.11/si...

  File "/Users/anotherbadcode/Library/Caches/pypoetry/virtualenvs/taxfix-app-9B8dhDvo-py3.11/lib/python3.11/site-packages/pandas/io/sql.py", line 734, in read_sql
    return pandas_sql.read_query(
           │          └ <function SQLDatabase.read_query at 0x11b88e520>
           └ <pandas.io.sql.SQLDatabase object at 0x12ced4b10>
  File "/Users/anotherbadcode/Library/Caches/pypoetry/virtualenvs/taxfix-app-9B8dhDvo-py3.11/lib/python3.11/site-packages/pandas/io/sql.py", line 1836, in read_query
    result = self.execute(sql, params)
             │    │       │    └ None
             │    │       └ <sqlalchemy.sql.selectable.Select object at 0x12c962010>
             │    └ <function SQLDatabase.execute at 0x11b88e340>
             └ <pandas.io.sql.SQLDatabase object at 0x12ced4b10>
  File "/Users/anotherbadcode/Library/Caches/pypoetry/virtualenvs/taxfix-app-9B8dhDvo-py3.11/lib/python3.11/site-packages/pandas/io/sql.py", line 1660, in execute
    return self.con.execute(sql, *args)
           │    │   │       │     └ []
           │    │   │       └ <sqlalchemy.sql.selectable.Select object at 0x12c962010>
           │    │   └ <function Connection.execute at 0x12bf82160>
           │    └ <sqlalchemy.engine.base.Connection object at 0x12ced4b50>
           └ <pandas.io.sql.SQLDatabase object at 0x12ced4b10>
  File "/Users/anotherbadcode/Library/Caches/pypoetry/virtualenvs/taxfix-app-9B8dhDvo-py3.11/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1416, in execute
    return meth(
           └ <bound method ClauseElement._execute_on_connection of <sqlalchemy.sql.selectable.Select object at 0x12c962010>>
  File "/Users/anotherbadcode/Library/Caches/pypoetry/virtualenvs/taxfix-app-9B8dhDvo-py3.11/lib/python3.11/site-packages/sqlalchemy/sql/elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
           │          └ <function Connection._execute_clauseelement at 0x12bf82480>
           └ <sqlalchemy.engine.base.Connection object at 0x12ced4b50>
  File "/Users/anotherbadcode/Library/Caches/pypoetry/virtualenvs/taxfix-app-9B8dhDvo-py3.11/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1638, in _execute_clauseelement
    ret = self._execute_context(
          │    └ <function Connection._execute_context at 0x12bf82660>
          └ <sqlalchemy.engine.base.Connection object at 0x12ced4b50>
  File "/Users/anotherbadcode/Library/Caches/pypoetry/virtualenvs/taxfix-app-9B8dhDvo-py3.11/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1843, in _execute_context
    return self._exec_single_context(
           │    └ <function Connection._exec_single_context at 0x12bf82700>
           └ <sqlalchemy.engine.base.Connection object at 0x12ced4b50>
  File "/Users/anotherbadcode/Library/Caches/pypoetry/virtualenvs/taxfix-app-9B8dhDvo-py3.11/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1983, in _exec_single_context
    self._handle_dbapi_exception(
    │    └ <function Connection._handle_dbapi_exception at 0x12bf82980>
    └ <sqlalchemy.engine.base.Connection object at 0x12ced4b50>
  File "/Users/anotherbadcode/Library/Caches/pypoetry/virtualenvs/taxfix-app-9B8dhDvo-py3.11/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 2352, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
          │                    │              │                 └ OperationalError('no such table: dataset')
          │                    │              └ (<class 'sqlite3.OperationalError'>, OperationalError('no such table: dataset'), <traceback object at 0x12ced5e80>)
          │                    └ <method 'with_traceback' of 'BaseException' objects>
          └ OperationalError('(sqlite3.OperationalError) no such table: dataset')
  File "/Users/anotherbadcode/Library/Caches/pypoetry/virtualenvs/taxfix-app-9B8dhDvo-py3.11/lib/python3.11/site-packages/sqlalchemy/engine/base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
    │    │       └ <function DefaultDialect.do_execute at 0x12c949800>
    │    └ <sqlalchemy.dialects.sqlite.pysqlite.SQLiteDialect_pysqlite object at 0x12c963050>
    └ <sqlalchemy.engine.base.Connection object at 0x12ced4b50>
  File "/Users/anotherbadcode/Library/Caches/pypoetry/virtualenvs/taxfix-app-9B8dhDvo-py3.11/lib/python3.11/site-packages/sqlalchemy/engine/default.py", line 942, in do_execute
    cursor.execute(statement, parameters)
    │      │       │          └ ()
    │      │       └ 'SELECT dataset.age, dataset.income, dataset.employment_type, dataset.marital_status, dataset.time_spent_on_platform, dataset...
    │      └ <method 'execute' of 'sqlite3.Cursor' objects>
    └ <sqlite3.Cursor object at 0x12cef4040>

sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such table: dataset
[SQL: SELECT dataset.age, dataset.income, dataset.employment_type, dataset.marital_status, dataset.time_spent_on_platform, dataset.number_of_sessions, dataset.fields_filled_percentage, dataset.previous_year_filing, dataset.device_type, dataset.referral_source, dataset.completed_filing 
FROM dataset]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-03-12 23:59:25.632 | INFO     | __main__:main:36 - Starting model service
2025-03-12 23:59:25.632 | INFO     | model_service:load_model:54 - Model catboost_model_v1.pkl not found
2025-03-12 23:59:25.632 | INFO     | collection:load_data:27 - Loading data from data/dataset.csv
2025-03-12 23:59:25.660 | INFO     | model:build_model:16 - Model training columns: ['employment_type', 'marital_status', 'device_type', 'referral_source', 'previous_year_filing', 'age', 'income', 'time_spent_on_platform', 'number_of_sessions', 'fields_filled_percentage', 'sessions_per_minute', 'fields_filled_x_sessions']
2025-03-12 23:59:25.662 | INFO     | model:train_model:34 - Training model
2025-03-12 23:59:26.695 | INFO     | model:evaluate_model:50 - F1 score: 0.7500699066347629
2025-03-12 23:59:26.696 | INFO     | model:save_model:56 - Saving model into directory
2025-03-12 23:59:26.696 | INFO     | model_service:load_model:56 - Model catboost_model_v1.pkl trained and saved
2025-03-12 23:59:26.702 | INFO     | __main__:main:39 - settings.test_data: {'age': 30, 'income': 45000, 'employment_type': 'full_time', 'marital_status': 'single', 'time_spent_on_platform': 120, 'number_of_sessions': 5, 'fields_filled_percentage': 80, 'previous_year_filing': 1, 'device_type': 'mobile', 'referral_source': 'friend_referral'}
2025-03-12 23:59:26.710 | INFO     | __main__:main:40 - processed features:    age   income employment_type  ...  referral_source  sessions_per_minute  fields_filled_x_sessions
0   30  45000.0       full_time  ...  friend_referral                    0                       400

[1 rows x 12 columns]
2025-03-12 23:59:26.713 | INFO     | __main__:main:42 - Prediction on test data from config: [1]
2025-03-12 23:59:26.718 | INFO     | __main__:main:50 - test_json:    age   income employment_type  ... referral_source  sessions_per_minute  fields_filled_x_sessions
0   30  50000.0       full-time  ...          friend                    0                       800

[1 rows x 12 columns]
2025-03-12 23:59:26.720 | INFO     | __main__:main:51 - test_df:    age   income employment_type  ... referral_source  sessions_per_minute  fields_filled_x_sessions
0   30  50000.0       full-time  ...          friend                    0                       800

[1 rows x 12 columns]
2025-03-12 23:59:26.722 | INFO     | __main__:main:53 - Prediction on test json: [1]
2025-03-13 00:03:02.373 | INFO     | __main__:main:36 - Starting model service
2025-03-13 00:03:02.378 | INFO     | __main__:main:39 - settings.test_data: {'age': 30, 'income': 45000, 'employment_type': 'full_time', 'marital_status': 'single', 'time_spent_on_platform': 120, 'number_of_sessions': 5, 'fields_filled_percentage': 80, 'previous_year_filing': 1, 'device_type': 'mobile', 'referral_source': 'friend_referral'}
2025-03-13 00:03:02.388 | INFO     | __main__:main:40 - processed features:    age   income employment_type  ...  referral_source  sessions_per_minute  fields_filled_x_sessions
0   30  45000.0       full_time  ...  friend_referral                    0                       400

[1 rows x 12 columns]
2025-03-13 00:03:02.401 | INFO     | __main__:main:42 - Prediction on test data from config: [1]
2025-03-13 00:03:02.406 | INFO     | __main__:main:50 - test_json:    age   income employment_type  ... referral_source  sessions_per_minute  fields_filled_x_sessions
0   30  50000.0       full-time  ...          friend                    0                       800

[1 rows x 12 columns]
2025-03-13 00:03:02.408 | INFO     | __main__:main:51 - test_df:    age   income employment_type  ... referral_source  sessions_per_minute  fields_filled_x_sessions
0   30  50000.0       full-time  ...          friend                    0                       800

[1 rows x 12 columns]
2025-03-13 00:03:02.409 | INFO     | __main__:main:53 - Prediction on test json: [1]
2025-03-13 00:04:18.940 | INFO     | __main__:main:36 - Starting model service
2025-03-13 00:04:18.941 | INFO     | __main__:main:39 - settings.test_data: {'age': 30, 'income': 45000, 'employment_type': 'full_time', 'marital_status': 'single', 'time_spent_on_platform': 120, 'number_of_sessions': 5, 'fields_filled_percentage': 80, 'previous_year_filing': 1, 'device_type': 'mobile', 'referral_source': 'friend_referral'}
2025-03-13 00:04:18.947 | INFO     | __main__:main:40 - processed features:    age   income employment_type  ...  referral_source  sessions_per_minute  fields_filled_x_sessions
0   30  45000.0       full_time  ...  friend_referral                    0                       400

[1 rows x 12 columns]
2025-03-13 00:04:18.952 | INFO     | __main__:main:42 - Prediction on test data from config: [1]
2025-03-13 00:04:18.956 | INFO     | __main__:main:48 - test_json:    age   income employment_type  ... referral_source  sessions_per_minute  fields_filled_x_sessions
0   30  50000.0       full-time  ...          friend                    0                       800

[1 rows x 12 columns]
2025-03-13 00:04:18.958 | INFO     | __main__:main:50 - Prediction on test json: [1]
2025-03-13 00:15:23.046 | INFO     | __main__:main:36 - Starting model service
2025-03-13 00:15:23.070 | INFO     | __main__:main:40 - Prediction on test data from config: [1]
2025-03-13 00:15:23.073 | INFO     | __main__:main:47 - Prediction on test json: [1]
